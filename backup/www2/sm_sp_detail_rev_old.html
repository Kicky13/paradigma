<!DOCTYPE html>
<html>
    <head>
        <!--        <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *">-->
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
        <link rel="stylesheet" type="text/css" href="css/index.css">
        <link rel="stylesheet" type="text/css" href="css/animate.css">
        <link rel="stylesheet" type="text/css" href="css/slick.css">
        <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
        <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="css/bootstrap-markdown.min.css">
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
<script src="js/Session.js"></script>
        <script type="text/javascript" src="js/JsNumberFormat.js"></script>
	<script type="text/javascript" src="js/loader.js"></script>
        <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
        <script src="js/stupidtable.js?dev"></script>
  <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
        <script type="text/javascript" src="js/highcharts_working.js"></script>
          <script>
            $(function(){
                $("table").stupidtable();
            });
          </script>
        
          <style type="text/css">
            table {
              border-collapse: collapse;
              width: 100%;
            }
            th, td {
              padding: 5px 10px;
              border: 1px solid #999;
            }
            th {
              background-color: #e3000e;
            }
            th[data-sort]{
              cursor:pointer;
            }
            tr.awesome{
              color: red;
            }
          </style>
        
<!--        <script type="text/javascript" src="js/sorttable.js"></script>-->
        <script type="text/javascript" charset="utf-8">
            function exitApps() {
                navigator.app.exitApp();
            }
        </script>
        <title>Sales & Marketing</title>
        <script>
            function onLoad() {
var session = getParamFull();
                ////=========================
                if (sessionStorage.getItem('_com')!='ALL') {
                    $.each(listTab, function(index, el){
                        $('#tab-'+el+' a').removeAttr('href');
                        $('#tab-'+el+' a').removeAttr('rel');
                    })
                }
                ////=========================
                $(".burger-menu").click(function (e) {
                    if ($(this).hasClass("is-active")) {
                        $(this).removeClass("is-active");
                        $("#content").removeClass("slideMenu");
                        $("#content").addClass("closeMenu");

                    } else {
                        $(this).addClass("is-active");
                        $("#content").removeClass("closeMenu");
                        $("#content").addClass("slideMenu");
                    }
                });
            }

            var d = new Date();
            var month = new Array();
            month[0] = "January";
            month[1] = "February";
            month[2] = "March";
            month[3] = "April";
            month[4] = "May";
            month[5] = "June";
            month[6] = "July";
            month[7] = "August";
            month[8] = "September";
            month[9] = "October";
            month[10] = "November";
            month[11] = "December";
            var bulan = month[d.getMonth()];
            var bulanSekarang = d.getMonth() + 1;
            var tahun = d.getFullYear();
        </script>
    </head>
    <body onLoad="onLoad()">
        <div class="app">
            <div id="deviceready">
                <nav id="sideMenu">
                    <ul>
                <li><a href="index.html"><img src="img/sidebr/hm.png" >&nbsp;&nbsp;HOME</a></li>
                <li><a href="portal_prod1.html"><img src="img/sidebr/pro.png" >&nbsp;&nbsp;PRODUCTION</a></li>
                <li><a href="portal_sales.html"><img src="img/sidebr/sale.png" >&nbsp;&nbsp;SALES</a></li>
                <li><a href="portal_scm.html"><img src="img/sidebr/sc.png" >&nbsp;&nbsp;SCM</a>
                <li><a href="portal_finance.html"><img src="img/sidebr/fin.png" >&nbsp;&nbsp;FINANCE</a></li>
                <li><a href="portal_project.html"><img src="img/sidebr/pj.png" >&nbsp;&nbsp;PROJECT</a>
                <li><a href="index_login2.html"><img src="img/sidebr/out.png" >&nbsp;&nbsp;LOGOUT</a>
                </ul>
                </nav>
                <div id="content" class="animated" style="background:#f5f5f5;">
                    <header id="header">
                        <button class="burger-menu burger-menu-x" id="btnMenuOpen"> <span>toggle menu</span> </button>
                        <a class="logopis" href="index.html"><img src="img/logoPis.png"></a> <a class="logo" href="index.html"><img src="img/logo.png"></a> </header>
                    <div class="wrapper">
                        <div class="production-value" >
                            <div class=" headetil cubesRun2">
                                <div class="row">
                                    <div class="col-xs-4"; style="padding:0px;">
                                        <img src="img/icKota2.png"></div>
                                    <div class="col-xs-8"; style="padding:0px"> <img src="img/teks%20semen%20indo.png"; style="width:50%; float:left; margin-top:14px;";  >
                                        <p style="text-align:center; color:black; font-weight:bold; font-size:25px; font-size:bold; float:left">SEMEN PADANG</p>
                                    </div>
                                </div>
                                <br>
                                <div style="float:left; font-size: 15px;"> &nbsp;&nbsp;&nbsp;<i class="fa fa-bar-chart" aria-hidden="true"></i><span style="color: black; float:right; "> &nbsp; Monthly Report </span> </div>
                                <p></p>
                                <br>
                                <div id="revenue" style="width:100%; height:250px"></div>
                                <script src="gresik_detil_data.js"></script>
                                <script src="js/highcharts.js"></script>
                                <div class="row" align="center" style="color:#e3000e; font-size:10px;"  >
                                    <div class="col-xs-6" style="border-right: 1px solid #505050;">
                                        <div class="col-xs-12">
                                            <div style="float: right;"><i><b>Real :</b></i><span class="valuedetil" id="realr_tot1" style="font-size: 12px;"></span> </div>
                                            <br>
                                        </div>
                                        <div class="col-xs-12" style="margin-bottom: 3px; margin-top: 3px;"> <span class="valuedetil" id="percentr3000"></span> <i class="fa fa-sort-asc fa-2x" aria-hidden="true" align="left" style="color: crimson;" ></i> <br>
                                        </div>
                                        <div class="col-xs-12">
                                            <div style="float: left;"><i><b>RKAP :</b></i> <span class="valuedetil" id="rkapr_tot1" style="font-size: 12px;"></span> </div>
                                            <br>
                                        </div>
                                    </div>
                                    <!-- <div class="col-xs-6">
                                        <div class="col-xs-12" style="float:center" align="center"> <img src="img/2.png" width="16px"><br>
                                            <span class="valuedetil"> 1.933.43 T</span> <br>
                                            <i><b>PROGNOSE BULAN</b></i> </div>
                                    </div>
                                </div> -->
                                <br>
                                <div class="row" align="center" style="color:#e3000e; font-size:10px;"> </div>
                                <!-- <div class="chartBox">
                                    <p style="color: red; text-align:left; "> &nbsp; Detail Province : </p>
                                    <div class="table-responsive" >
                                        <table>
                                            <thead style="background-color: #e3000e; color: white;">
                                                <tr >
                                                    <th data-sort="string"; align="left"><strong> Province </strong><i class="fa fa-sort" aria-hidden="true"></i>&nbsp;</th>
                                                    <th align="right"><strong> Target </strong> &nbsp;</th>
                                                    <th align="right"><strong> Real </strong> &nbsp;</th>
                                                    <th data-sort="float"; align="right"><strong> Percentage </strong><i class="fa fa-sort" aria-hidden="true"></i>&nbsp; </th>
                                                </tr>
                                            </thead>
                                            <tbody id="isidetail">
                                            </tbody>
                                        </table>
                                    </div>
                                </div> -->
                                <div class="spacer2"></div>
        
                                <script>
                                $(function(){
$.ajax({
  
  url: url_src+'/STMRevVolPrice3000.php',
  //url: 'STMRevVolPrice.json',
  type: 'GET',
  success: function(data){
    //console.log('test');
    var data1 = data.replace("<title>Json</title>", "");
    var data2 = data1.replace("(", "[");
    var data = data2.replace(");", "]");
   var a = jQuery.parseJSON(data);
     //var a = data;
     var rkapr = [];
     var realr = [];
     var lastr = [];

     var rkapr_tot = 0;
     var realr_tot = 0;
     var lastr_tot = 0;
     var percentr = 0;

     var percentr3000 = 0;

     var rkapr_tot1 = 0;
     var realr_tot1 = 0;
    

     var rkapr3000 =0;
     var realr3000 =0;
    

     //var data = eval('('+data+')');
  // console.log(a);
    var s = '';
     
   for (var b=1;b<13;b++){
    if (b < 10){
     var s = '0'+b;
    }else{
     var s = b; 
    }

   $.each(a, function(key, val){
    $.each(val, function(key2, val2){
      $.each(val2, function(key3, val3){
    if(key == '3000'){
      if(key2 == s){
      if (key3 == 'rkap_revenue'){
        // console.log(key2);
        //  console.log(key3+' '+val3);
         rkapr.push(Number(val3));
         rkapr3000 = Number(val3);
         $('#rkapr3000').html(rkapr3000.toFixed(2)+' K');
      }
      else if(key3 == 'real_revenue'){
        // console.log(key2);
        //  console.log(key3+' '+val3);
         realr.push(Number(val3));
         realr3000 = Number(val3);
         $('#realr3000').html(realr3000.toFixed(2)+' K');
      }
      else if(key3 == 'last_revenue'){
        // console.log(key2);
        //  console.log(key3+' '+val3);
         lastr = Number(val3);
         $('#lastr').html(lastr.toFixed(2)+' K');
      }
    }
}
  })
  })
  })
   rkapr_tot += Number(rkapr3000);
   // console.log(rkapv_tot);
   $('#rkapr_tot').html(FormatNumberBy3((rkapr_tot/1000000000).toFixed(2).replace(".",","), ",",".")+' B');

   realr_tot += Number(realr3000);
   $('#realr_tot').html(FormatNumberBy3((realr_tot/1000000000).toFixed(2).replace(".",","), ",",".")+' B');

   lastr_tot += Number(lastr);
   $('#lastr_tot').html((lastr_tot/1000000000).toFixed(2)+' B');

   percentr = (Number(realr_tot)/Number(rkapr_tot))*100;
   $('#percentr').html(FormatNumberBy3(percentr.toFixed(2).replace(".",","), ",",".")+'<font size="5"> %</font>');

   rkapr_tot1 += Number(rkapr3000);
   // console.log(rkapv_tot1);
   $('#rkapr_tot1').html(FormatNumberBy3((rkapr_tot1/1000000000).toFixed(2).replace(".",","), ",",".")+' B');
   realr_tot1 += Number(realr3000);
   $('#realr_tot1').html(FormatNumberBy3((realr_tot1/1000000000).toFixed(2).replace(".",","), ",",".")+' B');
   //console.log(realr_tot1);
 

   percentr3000 = (Number(realr_tot)/Number(rkapr_tot))*100;
   $('#percentr3000').html((percentr3000.toFixed(2).replace(".",","))+'<font size="1"> %</font>');
  
}
$('#revenue').highcharts({
                                    title: {
                                        text: ''            
                                    },

                                    credits: {
                                        enabled :false
                                    },

                                    chart: {
                                        backgroundColor:'rgba(0, 255, 0, 0)',
                                        polar: true
                                    },
                                    xAxis: {
                                        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
                                    },

                                    plotOptions: {
                                        series: {
                                            states: {
                                                hover: {
                                                    enabled: false
                                                }
                                            }
                                        }
                                    },        

                                    series: [{
                                        type: 'column',
                                        name: 'Real Value',
                                        color: '#45DD90',
                                        data: realr,
                                    },{
                    type: 'line',
                                        name: 'RKAP Value',
                                        color: '#FF615D',
                                        data: rkapr,
                                    }]        


                                });
}
})
})

                                </script>
                            </div>
                        </div>
                    </div>
                </div>
                <!--       <script type="text/javascript" src="cordova.js"></script>-->
                <!--	<script type="text/javascript" src="js/index.js"></script>-->
                <script src="slick.js" type="text/javascript" charset="utf-8"></script>
        <script type="text/javascript">
        $(document).on('ready', function() {
            $('.single-item').slick();
            $('.multiple-items').slick({
                infinite: true,
                slidesToShow: 4,
                slidesToScroll: 4
                });
            $(".regular").slick({
        infinite: true,
        slidesToShow: 3,
        slidesToScroll: 3,
        arrows:true,
         centerMode: true
        // variableWidth: true
      });
            });
        </script>
        </body>
                </html>
