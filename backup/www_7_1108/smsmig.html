<!DOCTYPE html>
<html>
<head>

<meta name="format-detection" content="telephone=no">
<meta name="msapplication-tap-highlight" content="no">
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
<link rel="stylesheet" type="text/css" href="css/index.css">
<link rel="stylesheet" type="text/css" href="css/animate.css">
<link rel="stylesheet" type="text/css" href="css/slick.css">
<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="css/archon.css">
<link rel="stylesheet" type="text/css" href="css/bootstrap-markdown.min.css">
<link rel="stylesheet" type="text/css" href="css/style.css">
<link rel="stylesheet" type="text/css" href="slick.css"/>
        <link rel="stylesheet" type="text/css" href="slick-theme.css"/>
<script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
<script src="js/Session.js"></script>
<script src="js/loader.js"></script>
<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
<script type="text/javascript" charset="utf-8">
            function exitApps() {
                navigator.app.exitApp();
            }
        </script>
<script type="text/javascript" src="js/Chart.min.js"></script>
<title>Sales & Marketing</title>
<script>
            function onLoad() {
var session = getParamFull();
                ////=========================
                if (sessionStorage.getItem('_com')!='ALL') {
                    $.each(listTab, function(index, el){
                        $('#tab-'+el+' a').removeAttr('href');
                        $('#tab-'+el+' a').removeAttr('rel');
                    })
                }
                ////=========================
                $(".burger-menu").click(function (e) {
                    if ($(this).hasClass("is-active")) {
                        $(this).removeClass("is-active");
                        $("#content").removeClass("slideMenu");
                        $("#content").addClass("closeMenu");

                    } else {
                        $(this).addClass("is-active");
                        $("#content").removeClass("closeMenu");
                        $("#content").addClass("slideMenu");
                    }
                });
            }

            var d = new Date();
            var month = new Array();
            month[0] = "January";
            month[1] = "February";
            month[2] = "March";
            month[3] = "April";
            month[4] = "May";
            month[5] = "June";
            month[6] = "July";
            month[7] = "August";
            month[8] = "September";
            month[9] = "October";
            month[10] = "November";
            month[11] = "December";
            var bulan = month[d.getMonth()];
            var bulanSekarang = d.getMonth() + 1;
            var tahun = d.getFullYear();
        </script>
<style type="text/css">
<!--
.style1 {
    font-size: 12px;
    color: #333333;
}
-->
</style>
</head>
<body onLoad="onLoad()">
<div class="app">
<div id="deviceready">
  <nav id="sideMenu">
                    <ul>
                <li><a href="index.html"><img src="img/sidebr/hm.png" >&nbsp;&nbsp;HOME</a></li>
                <li><a href="portal_prod1.html"><img src="img/sidebr/pro.png" >&nbsp;&nbsp;PRODUCTION</a></li>
                <li><a href="portal_sales.html"><img src="img/sidebr/sale.png" >&nbsp;&nbsp;SALES</a></li>
                <li><a href="portal_scm.html"><img src="img/sidebr/sc.png" >&nbsp;&nbsp;SCM</a>
                <li><a href="portal_finance.html"><img src="img/sidebr/fin.png" >&nbsp;&nbsp;FINANCE</a></li>
                <li><a href="portal_project.html"><img src="img/sidebr/pj.png" >&nbsp;&nbsp;PROJECT</a>
                <li><a href="index_login2.html"><img src="img/sidebr/out.png" >&nbsp;&nbsp;LOGOUT</a>
                </ul>
  </nav>
  <div id="content" class="animated" style="background:#f5f5f5;">
    <header id="header">
      <button class="burger-menu burger-menu-x" id="btnMenuOpen"> <span>toggle menu</span> </button>
      <a class="logopis" href="index.html"><img src="img/logoPis.png"></a> <a class="logo" href="index.html"><img src="img/logo.png"></a> </header>
    <div class="wrapper">
      <h2 class="titular" style="background: #e64c65; margin-bottom:17px;">MONTHLY SALES REPORT</h2>

      <div class="col-xs-12">
        <div class=" headsix cubesRun">
          <div class="col-xs-2 noPadding" style="font-weight: bold; ">SMIG</div>
          <div class="col-xs-10 noPadding" align="right" style="font-size:16px; font-weight: bold; color:#333333" id="rkapsmig"></div>
          <div class="col-xs-12 noPadding" align="center" style="color:#33CC33">
            <h3 class="prosen" id="percentsmig"></h3>
          </div>
          <div id="realsmig"></div></div>

        <div class="col-xs-6 noPadding">
          <div class=" headdown cubesRun" style="border-bottom:3px solid #ff9b1f;">

            <div class="col-xs-2 noPadding" style="font-weight: bold; ">SG</div>
            <a href="sm_sg_detail.html"><div class="col-xs-10 noPadding" align="right" style="font-size:13px; font-weight: bold; color:#333333" id="rkap7000"> </div>
            <div class="col-xs-12 noPadding" align="center" style="color:#33CC33">
              <h3 id="percent7000"></h3>
            </div></a>
            <div id="real7000"></div>
            </div>

        </div>

        <div class="col-xs-6 noPadding">
          <div class=" headdown cubesRun" style="border-bottom:3px solid #53d0c0;">
            <div class="col-xs-2 noPadding" style="font-weight: bold; ">SP</div>
            <a href="sm_sp_detail.html"><div class="col-xs-10 noPadding" align="right" style="font-size:13px; font-weight: bold; color:#333333" id="rkap3000"></div>
            <div class="col-xs-12 noPadding" align="center" style="color:#33CC33">
              <h3 id="percent3000"></h3>
            </div></a>
            <div id="real3000"></div> </div>
        </div>
        <div class="col-xs-6 noPadding">
          <div class=" headdown cubesRun" style="border-bottom:3px solid #62a9f9;">
            <div class="col-xs-2 noPadding" style="font-weight: bold; ">ST</div>
            <a href="sm_st_detail.html"><div class="col-xs-10 noPadding" align="right" style="font-size:13px; font-weight: bold; color:#333333" id="rkap4000"><span style="font-size:12px; color:#333333">RKAP :</span></div>
            <div class="col-xs-12 noPadding" align="center" style="color:#33CC33">
              <h3 id="percent4000"></h3>
            </div></a>
            <div id="real4000"></div> </div>
        </div>
        <div class="col-xs-6 noPadding">
          <div class=" headdown cubesRun" style="border-bottom:3px solid #f76767;">
            <div class="col-xs-2 noPadding" style="font-weight: bold; ">TLCC</div>
            <div class="col-xs-10 noPadding" align="right" style="font-size:13px; font-weight: bold; color:#333333"><span style="font-size:12px; color:#333333">RKAP :</span> 0 T</div>
            <div class="col-xs-12 noPadding" align="center" style="color:#33CC33">
              <h3>0<font size="3"> %</font></h3>
            </div>
            <Strong>REAL : </Strong><span class="row-xs-2 noPadding" align="left" style="font-weight: bold; font-size:13px; color:#696969">0 T</span> </div>
        </div>
        
        <div class="chartBox">
          <h1 class="title">PRODUCTION / OPCO : <span class="bulan"></span></h1>
          <div class="chartWrapper">
            <div class="chart" style="width:250px">
              <canvas id="prodOpco"></canvas>
            </div>
          </div>
          <div class="legend">
            <div class="l1">RKAP</div>
            <div class="l2">Realisasi</div>
          </div>
        </div>

        <div class="spacer"></div>
        <script>
                            function n(n) {
                                return n > 9 ? "" + n : "0" + n;
                            }

                            $.ajax({
                                  url: url_src+'/ScoOpcoGen.php',
                                    type:'GET',
                                      success: function(data) {
                                        var data = eval('('+data+')');
                                       
                                       var target7000 = data['s7000'].target;
                                       var real7000 = data['s7000'].real;

                                       var target4000 = data['s4000'].target;
                                       var real4000 = data['s4000'].real;

                                       var target3000 = data['s3000'].target;
                                       var real3000 = data['s3000'].real;

                                       var smigtarget = Number(target7000)+Number(target4000)+Number(target3000);
                                       var smigreal = Number(real7000)+Number(real4000)+Number(real3000);

                                       var percent3000 = (real3000/target3000)*100;
                                       var percent4000 = (real4000/target4000)*100;
                                       var percent7000 = (real7000/target7000)*100;
                                       var percentsmig = (smigreal/smigtarget)*100;

                                        $("#rkap7000").html('<span style="font-size:12px; color:#333333">RKAP :</span> '+((data.s7000.target)/1000).toFixed(2) +'k');
                                        $("#real7000").html('<strong>REAL :</strong> <span class="row-xs-2 noPadding" align="left" style="font-weight: bold; font-size:13px; color:#696969"><strong>'+ ((data.s7000.real)/1000).toFixed(2)+'k</strong></span>');

                                        $("#rkap4000").html('<span style="font-size:12px; color:#333333">RKAP :</span>'+((data.s4000.target)/1000).toFixed(2)+'k');
                                        $("#real4000").html('<strong>REAL :</strong> <span class="row-xs-2 noPadding" align="left" style="font-weight: bold; font-size:13px; color:#696969"><strong>'+ ((data.s4000.real)/1000).toFixed(2)+'k</strong></span>');

                                        $("#rkap3000").html('<span style="font-size:12px; color:#333333">RKAP :</span>'+((data.s3000.target)/1000).toFixed(2)+'k');
                                        $("#real3000").html('<strong>REAL :</strong> <span class="row-xs-2 noPadding" align="left" style="font-weight: bold; font-size:13px; color:#696969"><strong>'+ ((data.s3000.real)/1000).toFixed(2)+'k</strong></span>');

                                        $("#rkapsmig").html('<span style="font-size:12px; color:#333333">RKAP : </span> '+(smigtarget/1000).toFixed(2)+'k');
                                        $("#realsmig").html('<strong>REAL :</strong> <span class="row-xs-2 noPadding" align="left" style="font-weight: bold; font-size:13px; color:#696969"><strong>'+(smigreal/1000).toFixed(2)+'k</strong></span>');

                                        $("#percent3000").html(percent3000.toFixed(2)+'<font size="3"> %</font>');
                                        $("#percent4000").html(percent4000.toFixed(2)+'<font size="3"> %</font>');
                                        $("#percent7000").html(percent7000.toFixed(2)+'<font size="3"> %</font>');
                                        $("#percentsmig").html(percentsmig.toFixed(2)+'<font size="3"> %</font>');

                                        //Chart
                                        var rkap_chart = [];
                                        var real_chart = [];

                                        rkap_chart.push(parseInt(smigtarget/1000));
                                        real_chart.push(parseInt(smigreal)/1000);

                                        rkap_chart.push(parseInt(target7000/1000));
                                        real_chart.push(parseInt(real7000)/1000);

                                        rkap_chart.push(parseInt(target3000)/1000);
                                        real_chart.push(parseInt(real3000)/1000);

                                        rkap_chart.push(parseInt(target4000)/1000);
                                        real_chart.push(parseInt(real4000)/1000);


                                        var labelArrays = ['SMIG','SG','SP','ST'];

                                        var ctx3 = document.getElementById("prodOpco");
                                        var data3 = {                                          
                                        labels: labelArrays,
                                        datasets: [
                                            {
                                                label: "RKAP",
                                                backgroundColor: '#f44336',
                                                data: rkap_chart,
                                            },
                                            {
                                                label: "Realisasi",
                                                backgroundColor: '#56aec2',
                                                data: real_chart,
                                            }

                                        ]
                                        };
                                        var myBarChart = new Chart(ctx3, {
                                            type: 'bar',
                                            data: data3,
                                            options: {
                                                legend: {
                                                    display: false,
                                                },                                                
                                                maintainAspectRatio: true,
                                                scales: {
                                                  yAxes: [{
                                                    scaleLabel: {
                                                      display: true,
                                                      size:5,
                                                      labelString: 'Dalam Ribuan'
                                                    }
                                                  }]
                                                }

                                            }
                                        });

                                      }
                                    }).done(function(data){
                                    }).fail(function(){

                                    });

                           
                            $.ajax({
                                url: url_src+'/GenerateJsonTotalHours.php',
                                type: 'GET',
                                success: function (data) {
                                    var data1 = data.replace("<title>Json</title>", "");
                                    var data2 = data1.replace("(", "[");
                                    var data3 = data2.replace(");", "]");

                                    var dataJson = JSON.parse(data3);
                                    var valProd1 = dataJson['666'].produksi;
                                    var valProd2 = dataJson['697'].produksi;
                                    var valProd1Num = valProd1.replace('.', '');
                                    var valProd2Num = valProd2.replace('.', '');
                                    var Float1 = new Number(parseFloat(valProd1Num.replace(',', '.')).toFixed(2));
                                    var Float2 = new Number(parseFloat(valProd2Num.replace(',', '.')).toFixed(2));


                                }
                            }).done(function (data) {
                            }).fail(function () {

                            });

                            $.ajax({
                                url: url_src+'/GenerateJsonTotalTahun.php',
                                type: 'GET',
                                success: function (data) {
                                    console.log(data.rawmill);
                                    $("#prod2").html(data.rawmill+' Ton');

                                }
                            }).done(function (data) {
                            }).fail(function () {

                            });
                            var alamat = url_src+'/GenerateJsonTotalTahun.php?bulan=' + bulanSekarang + '&tahun=' + tahun;
                            $.ajax({
                                url: alamat,
                                type: 'GET',
                                success: function (data) {
                                    $("#prod1").html(data.rawmill+' Ton');

                                }
                            }).done(function (data) {
                            }).fail(function () {

                            });

                        </script>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="js/index.js"></script>
<script src="slick.js" type="text/javascript" charset="utf-8"></script>
        <script type="text/javascript">
        $(document).on('ready', function() {
            $('.single-item').slick();
            $('.multiple-items').slick({
                infinite: true,
                slidesToShow: 4,
                slidesToScroll: 4
                });
            $(".regular").slick({
        infinite: true,
        slidesToShow: 3,
        slidesToScroll: 3,
        arrows:true,
         centerMode: true
        // variableWidth: true
      });
            });
        </script>
        </body>
</html>
